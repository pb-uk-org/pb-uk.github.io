<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizing sorting algorithms</title>
    <meta name="description" content="Paul&#39;s home page miscellany.">

    <link rel="stylesheet" href="/assets/css/prism/prism-solarizedlight.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="PB UK">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="PB UK">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/buefy/dist/buefy.min.css">
    <!-- link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9/css/bulma.css" -->



    <link rel="stylesheet" href="/assets/css/index.css">

  </head>
  <body>
    
    

<nav role="navigation" aria-label="main navigation" class="navbar is-primary">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">PB UK</a>
      <a class="navbar-item" href="/articles/">Articles</a>
      <a class="navbar-item" href="/blog/">Blog</a>
      <a class="navbar-item" href="/tags/">Tags</a>
      <a class="navbar-item" href="/about/">About</a>

    </div>
  </div>
</nav>


    <section class="section py-0">
      <div class="container">
        
<nav class="breadcrumb my-3 is-size-7" aria-label="breadcrumbs">
  <ul>

  
    
      <li>In <a class="px-1" href="/algorithms/">algorithms</a></li>
    
  

  
    
      <li><a class="px-1" href="/algorithms/sorting/">sorting</a></li>
    
  

  
    
  

  </ul>
</nav>

<main class="content">
<h1 id="visualizing-sorting-algorithms">Visualizing sorting algorithms <a class="direct-link" href="#visualizing-sorting-algorithms">#</a></h1>
<p>This is where my app goes.</p>
<div id="app">
<div>{{ message }}</div>
</div>
<!-- script src="/assets/js/visualize-sorting.js"></script -->
<script>

let fn =
function* improvedBubbleSortGenerator(set, { compare, swap }) {
  let n = set.length;
  do {
    let newN = 0;
    for (let i = 1; i < n; ++i) {
      // Swap if set[i-1] > set[i].
      if (compare(set, i - 1, i)) {
        // Swap if set[i-1] > set[i].
        swap(set, i - 1, i);
        newN = i;
        yield set;
      } else {
        yield set;
      }
    }
    n = newN;
  } while (n > 1);
  // The set is sorted.
  return set;
}
;
 


function Compare() {
  this.count = 0;
  this.last = [null, null, null];

  function compare(set, a, b) {
    ++this.count;
    const result = set[a] > set[b] ? 1 : (set[a] < set[b] ? -1 : 0);
    this.last = [a, b, result];
    return result;
  };

  this.compare = compare.bind(this);
}

Compare.factory = function () {
  return new Compare();
}

function Swap() {
  this.count = 0;
  this.last = [null, null];

  function swap(set, a, b) {
    ++this.count;
    this.last = [a, b];
    const temp = set[a];
    set[a] = set[b];
    set[b] = temp;
  };
  this.swap = swap.bind(this);
}

Swap.factory = function () {
  return new Swap();
}

const compare = Compare.factory();
const swap = Swap.factory();

// The visualisation is a generator function.
const vis = fn([5, 4, 3, 2, 1], { compare: compare.compare, swap: swap.swap });

vis.compare = compare;
vis.swap = swap;
vis.algorithm = 'Improved bubble sort';
vis.initial = 'Reversed';

vis.render = function(value) {
  console.log('Rendering', this.isDone, value, this.compare.count, this.swap.count);
};

const visualizations = [
  vis,
];

let allDone = false;
const finish = Date.now() + 2000;
visualizations.forEach(vis => {
  vis.render();
});
while (!allDone && Date.now() < finish) {
  allDone = true;
  visualizations.forEach(vis => {
    if (vis.isDone) return;
    const { done, value } = vis.next();
    vis.isDone = done;
    vis.render(value);
    allDone &= done;
  });
}

/*
let fn =
function* improvedBubbleSortGenerator(set, { compare, swap }) {
  let n = set.length;
  do {
    let newN = 0;
    for (let i = 1; i < n; ++i) {
      // Swap if set[i-1] > set[i].
      if (compare(set, i - 1, i)) {
        // Swap if set[i-1] > set[i].
        swap(set, i - 1, i);
        newN = i;
        yield set;
      } else {
        yield set;
      }
    }
    n = newN;
  } while (n > 1);
  // The set is sorted.
  return set;
}
;
 
function Compare() {
  function compare(set, a, b) {
    ++this.count;
    const result = set[a] > set[b] ? 1 : (set[a] < set[b] ? -1 : 0);
    this.last = [a, b, result];
    return result;
  };
  return compare.bind({
    count: 0,
    last: [null, null, null],
  });
  compare.count = 0;
  compare.last = [null, null, null];
  return compare;
}

function Swap() {
  function swap(set, a, b) {
    ++this.count;
    this.last = [a, b];
    const temp = set[a];
    set[a] = set[b];
    set[b] = temp;
  };
  swap.count = 0;
  swap.last = [null, null];
  return swap;
}

console.log('Sorting function', fn.name, fn);

const set = [5, 6, 7, -1,-1,3,5,3, 2, 1];
const compare = new Compare;
const swap = new Swap;

console.log('Prepared', set, compare, swap);


const sorter = fn(set, { compare, swap });

console.log('Generator', sorter);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
console.log('Next', sorter.next(), compare.count, swap.count);
*/

</script>
<p>s</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">improvedBubbleSortGenerator</span><span class="token punctuation">(</span><span class="token parameter">set<span class="token punctuation">,</span> <span class="token punctuation">{</span> compare<span class="token punctuation">,</span> swap <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">let</span> n <span class="token operator">=</span> set<span class="token punctuation">.</span>length<span class="token punctuation">;</span><br>  <span class="token keyword">do</span> <span class="token punctuation">{</span><br>    <span class="token keyword">let</span> newN <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>      <span class="token comment">// Swap if set[i-1] > set[i].</span><br>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">compare</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Swap if set[i-1] > set[i].</span><br>        <span class="token function">swap</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        newN <span class="token operator">=</span> i<span class="token punctuation">;</span><br>        <span class="token keyword">yield</span> set<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>        <span class="token keyword">yield</span> set<span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>    n <span class="token operator">=</span> newN<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// The set is sorted.</span><br>  <span class="token keyword">return</span> set<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br></code></pre>

</main>
<hr>
<div class="columns pb-5">
  <div class="column is-size-7 py-0">Previous: <a href="/algorithms/number-theory/">Number theory</a>
  </div>
  <div class="column has-text-right is-size-7 py-0">
  </div>
</div>

      </div>
    </section>

    <footer
      class="footer has-text-centered is-size-7 py-1"
      ><a href="/about/#copyright">Copyright Â© 2020 PBUK</a></footer>

    <!-- Current page: /algorithms/sorting/visualization/ -->
  </body>
</html>
